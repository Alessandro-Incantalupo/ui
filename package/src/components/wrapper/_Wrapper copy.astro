---
import type { ComponentProps } from 'astro/types'
import Children from '../_Children.astro'
import Tag from '../_Tag.astro'

interface Props extends ComponentProps<typeof Tag> {
  html?: string
  x?: 'start' | 'center' | 'end' | 'between' | 'stretch' | 'fraction'
  y?: 'start' | 'center' | 'end' | 'between' | 'stretch' | 'fraction'
}

const {
  direction = 'vertical',
  x = 'left',
  y = 'top',
  layout,
  ...rest
} = Astro.props
---

<Tag
  class:list={[
    'wrapper',
    {
      [`direction-${direction}`]: direction,
      [`layout-${layout}`]: layout,
      [`x-${x}`]: x,
      [`y-${y}`]: y,
    },
  ]}
  {...rest}
>
  <slot name="before" />
  <Children {...rest} />
  <slot />
</Tag>

<style is:global lang="scss">
  .full.wrapper {
    * {
      margin: 0;
    }
  }

  .full.direction-horizontal:not(.full.x-fill) {
    display: flex;
    flex-direction: row;

    > {
      .full {
        + .full.deck,
        + .full.image:not(.full.position-background),
        + .full.icon {
          margin-left: var(--space-5);
        }
      }

      .full.deck,
      .full.image:not(.full.position-background),
      .full.icon {
        + .full {
          margin-left: var(--space-5);
        }
      }

      .full {
        + .full.group,
        + .full.form {
          margin-left: var(--space-4);
        }
      }

      .full {
        + .full.paragraph,
        + .full.link,
        + .full.heading,
        + .full.switch {
          margin-left: var(--space-3);
        }
      }

      .full {
        + .full.link {
          margin-left: var(--space-4);
        }
      }

      .full {
        + .full.button {
          margin-left: var(--space-5);
        }
      }

      .full.position-background + .full {
        margin-left: 0;
      }

      .full.button {
        + .full.button {
          margin-left: var(--space-2);
        }
      }

      .full.placeholder + .full.placeholder {
        margin-left: var(--space-4);
      }

      .full.position-background + .full {
        margin-left: 0;
      }
    }
  }

  .full.direction-vertical {
    display: flex;
    flex-direction: column;

    > {
      .full {
        + .full.deck,
        + .full.image:not(.full.position-background),
        + .full.icon {
          margin-top: var(--space-5);
        }
      }

      .full.placeholder + .full.placeholder {
        margin-top: var(--space-4);
      }

      .full {
        + .full.group,
        + .full.card,
        + .full.form,
        + .full.button,
        + .full.list {
          margin-top: var(--space-4);
        }
      }

      .full.list {
        + .full {
          margin-top: var(--space-4);
        }
      }

      .full {
        + .full.heading {
          margin-top: var(--space-3);
        }
      }

      .full.rating {
        + .full {
          margin-top: var(--space-4);
        }
      }

      .full.deck,
      .full.image:not(.full.position-background),
      .full.icon {
        + .full {
          margin-top: var(--space-5);
        }
      }

      .full.button {
        + .full.button {
          margin-top: var(--space-2);
        }
      }

      .full.paragraph {
        + .full.paragraph,
        + .full.label,
        + .full.input {
          margin-top: var(--space-2);
        }
      }

      .fullline {
        + .full.paragraph,
        + .full.heading,
        + .full.label,
        + .full.input {
          margin-top: var(--space-3);
        }
      }

      .full.heading {
        + .full.paragraph {
          margin-top: var(--space-3);
        }
      }

      .full.paragraph {
        + .full.heading {
          margin-top: var(--space-3);
        }
      }

      .full.label {
        + .full.input,
        + .full.textarea,
        + .full.select {
          margin-top: var(--space-1);
        }
      }

      .full.input {
        + .full.input,
        + .full.button,
        + .full.label {
          margin-top: var(--space-3);
        }
      }
    }
  }

  .full.direction-vertical {
    display: flex;
    flex-direction: column;

    // & > .full:not(:first-child) {
    //   margin-top: var(--my-spacer);
    // }

    &.x-left {
      align-items: flex-start;
    }

    &.x-center {
      align-items: center;
      text-align: center;

      > .full > .full {
        text-align: left;
      }
    }

    &.x-right {
      align-items: flex-end;
      text-align: right;

      > .full > .full {
        text-align: left;
      }
    }

    &.x-fill {
      align-items: stretch;
    }

    &.y-top {
      justify-content: flex-start;
    }

    &.y-center {
      justify-content: center;
    }

    &.y-bottom {
      justify-content: flex-end;
    }

    &.y-spread {
      justify-content: space-between;
    }

    &.y-fill {
      justify-content: stretch;
    }
  }

  .full.direction-horizontal {
    display: flex;
    flex-direction: row;

    // & > .full:not(:first-child) {
    //   margin-left: var(--my-spacer);
    // }

    &.x-left {
      justify-content: flex-start;
    }

    &.x-center {
      justify-content: center;
    }

    &.x-right {
      justify-content: flex-end;
    }

    &.x-spread {
      justify-content: space-between;
    }

    &.x-fill {
      display: grid;
      row-gap: var(--space-5);

      @media (min-width: 1024px) {
        grid-auto-columns: 1fr;
        grid-auto-flow: column;
      }

      & > .full {
        margin-left: 0;
      }
    }

    &.y-top {
      align-items: flex-start;
    }

    &.y-center {
      align-items: center;
    }

    &.y-bottom {
      align-items: flex-end;
    }

    &.y-stretch {
      align-items: stretch;
    }

    &.y-fill {
      align-items: stretch;
    }
  }
</style>
