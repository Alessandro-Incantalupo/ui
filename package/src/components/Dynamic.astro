---
import { z } from 'zod'
import Description from './Description.astro'
import Tagline from './Tagline.astro'
import Title from './Title.astro'

const allowedComponents: any = {
  Title,
  Description,
  Tagline,
}

// const COMPONENTS = Astro.glob('../**/*.astro')

const dynamicSchema = z.object({}).catchall(z.any())
const props = dynamicSchema.parse(Astro.props)
---

{
  Object.entries(props).map(([key, value]) => {
    let Component =
      allowedComponents[key.charAt(0).toUpperCase() + key.slice(1)]

    if (value?.component) Component = allowedComponents[value.component]
    if (!Component) return null

    return <Component {...value} />
  })
}
