---
import type { ComponentProps, Polymorphic } from 'astro/types'
import Component from '../../_Component.astro'
import SelectOption from '../select/SelectOption.astro'

type Props<As extends 'select'> = Polymorphic<{ as: As }> &
  ComponentProps<typeof Component> & {
    options?: (ComponentProps<typeof SelectOption> | string)[]
  }

const { as = 'select', options, ...rest } = Astro.props
---

<Component
  as="select"
  if={options}
  class:list={['select input']}
  {...rest}
>
  {
    options &&
      options.map((option: any) =>
        typeof option === 'string' ? (
          <SelectOption text={option} />
        ) : (
          <SelectOption {...option} />
        )
      )
  }
  <slot />
</Component>

<style is:global lang="scss">
  @import '../../../css/utils.scss';

  @include component('select') {
    appearance: none;
  }
</style>
