---
import type { ComponentProps, Polymorphic } from 'astro/types'
import Component from '../../_Component.astro'
import Icon from '../Icon.astro'
import InputControl from './InputControl.astro'

type Props<As extends 'div'> = Polymorphic<{ as: As }> &
  Pick<
    ComponentProps<typeof InputControl>,
    'placeholder' | 'type' | 'name' | 'variant'
  >

const { as = 'div', placeholder, variant, type, name, ...rest } = Astro.props
---

<Component
  class:list={['input-field']}
  {as}
  {...rest}
>
  <Icon
    class:list={['input-icon']}
    name="chevron-down"
  />
  <InputControl
    id={name}
    {name}
    {placeholder}
    {type}
  />
</Component>

<style is:global lang="scss">
  @import '../../../css/utils.scss';
  @include component('input-field') {
    position: relative;
  }

  @include component('input-icon') {
    position: absolute;
    top: 50%;
    left: var(--space-2);
    transform: translateY(-50%);
  }
</style>
