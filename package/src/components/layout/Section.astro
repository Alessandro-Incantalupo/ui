---
import type { ComponentProps, HTMLTag } from 'astro/types'
import Children from '../utility/Children.astro'
import Tag from '../utility/Tag.astro'

type Props<As extends HTMLTag = 'div'> = ComponentProps<typeof Tag<As>> &
  ComponentProps<typeof Children> & {
    direction?: 'row' | 'column'
    align?: 'start' | 'center'
    frame?: 'screen' | 'panel'
    variant?: 'solid' | 'soft' | 'ghost'
    layout: 'grid' | 'flex'
  }

const {
  as = 'section',
  direction = 'column',
  variant,
  frame,
  layout = 'grid',
  align,
  ...rest
} = Astro.props
---

<Tag
  {as}
  {...rest}
  class:list={[
    'full-section full-layout',
    direction,
    align,
    frame,
    variant,
    layout,
  ]}
>
  <slot name="before" />
  <Children {...rest} />
  <slot />
  <slot name="after" />
</Tag>

<style is:global>
  .full-section {
    display: flex;
    position: relative;
    flex-direction: column;
    order: 0;
    background: var(--full-background);
    padding: var(--spacer) var(--gutter);
    overflow-x: hidden;

    /* &:first-child {
      margin-top: 0;
      padding-top: var(--space-6);
    } */

    &.reverse > *:first-child {
      order: 2;
    }

    &.switch:nth-child(even) > *:first-child {
      @media (min-width: 1024px) {
        order: 2;
      }
    }

    &.column {
      display: flex;
      flex-direction: column;
    }

    &.row.grid {
      display: grid;
      column-gap: var(--gutter);
      align-items: center;

      @media (min-width: 1024px) {
        grid-auto-columns: 1fr;
        grid-auto-flow: column;
      }

      & > * {
        margin: 0 !important;
      }
    }

    &.row.flex {
      display: flex;
      align-items: center;
    }

    &.start {
      align-items: flex-start;
    }

    &.stretch {
      align-items: stretch;
    }

    &.center {
      align-items: center;
      text-align: center;

      & > * > * {
        text-align: left;
      }
    }

    &.end {
      align-items: flex-end;
    }

    &.panel {
      margin: var(--space-6) var(--gutter);
      border-width: var(--border-width);
      border-color: var(--border-color);
      border-radius: var(--radius);
      border-radius: var(--radius-2);
      background: var(--full-background);
      padding: var(--space-5) var(--gutter);
      padding: 0;
    }

    &.screen {
      min-height: 100vh;
    }

    /* .button.outline {
        border-color: var(--color-7) !important;
        color: var(--color-fg) !important;
      } */
  }
</style>
