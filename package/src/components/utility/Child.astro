---
import { z } from 'zod'
import Button from '../base/Button.astro'
import Checkbox from '../base/Checkbox.astro'
import Icon from '../base/Icon.astro'
import Image from '../base/Image.astro'
import Input from '../base/Input.astro'
import Label from '../base/Label.astro'
import Logo from '../base/Logo.astro'
import Media from '../base/Media.astro'
import Option from '../base/Option.astro'
import Rating from '../base/Rating.astro'
import Select from '../base/Select.astro'
import Spec from '../base/Spec.astro'
import Textarea from '../base/Textarea.astro'
import Video from '../base/Video.astro'
import Card from '../layout/Card.astro'
import Deck from '../layout/Deck.astro'
import Field from '../layout/Field.astro'
import Footer from '../layout/Footer.astro'
import Form from '../layout/Form.astro'
import Group from '../layout/Group.astro'
import Header from '../layout/Header.astro'
import Prose from '../layout/Prose.astro'
import Section from '../layout/Section.astro'
import Stack from '../layout/Stack.astro'
import Writeup from '../layout/Writeup.astro'
import Heading from '../typography/Heading.astro'
import Link from '../typography/Link.astro'
import Subtext from '../typography/Subtext.astro'
import Text from '../typography/Text.astro'
import Children from './Children.astro'
import Tag from './Tag.astro'

type Props = z.infer<typeof childSchema>

const COMPONENTS: any = {
  Heading,
  Text,
  Subtext,
  Writeup,
  Button,
  Card,
  Checkbox,
  Stack,
  Deck,
  Field,
  Footer,
  Form,
  Group,
  Header,
  Icon,
  Image,
  Input,
  Label,
  Link,
  Logo,
  Media,
  Option,
  Prose,
  Rating,
  Section,
  Select,
  Spec,
  Textarea,
  Video,
}

// export const childSchema = z.object({
//   component: z.string().optional(),
//   as:z.string().optional(),
// });

export const childSchema = z.any()

const { component, tag, ...rest } = childSchema.parse(Astro.props)

let Component = component && COMPONENTS[component]
---

{Component && <Component {...rest} />}

{
  !Component && tag && (
    <Tag {...rest}>
      <Children {...rest} />
    </Tag>
  )
}
