---
import { isArray, isObject } from 'radash'
import { z } from 'zod'
import Child from './Child.astro'

type Props = z.infer<typeof childrenSchema>

export const childrenSchema = z.object({}).passthrough()

const { ...rest } = childrenSchema.parse(Astro.props)
---

{
  Object.entries(rest).map(([key, value]) => {
    if (key === 'html') return <Fragment set:html={value} />
    if (isArray(value)) return value.map((item) => <Child {...item} />)
    if (isObject(value)) return <Child {...{ key, ...value }} />
    else return null
  })
}
