---
import type { ComponentProps } from 'astro/types'
import { buildProps, getChildProps, type BuildProps } from '../utils'
import Display from './Display.astro'
import Links from './Links.astro'
import Logo from './Logo.astro'
import Tag from './Tag.astro'
import Title from './Title.astro'

interface Props
  extends BuildProps<'footer', Props, string>,
    Pick<ComponentProps<typeof Logo>, 'logo' | '_logo'>,
    ComponentProps<typeof Tag> {
  columns?: {
    title: ComponentProps<typeof Title>['title']
    links: ComponentProps<typeof Links>['links']
  }[]
}
const { as = 'footer', ...rest } = buildProps('footer', Astro.props)

const child = getChildProps(rest)
---

<Tag
  {as}
  {...rest}
>
  <Display>
    <Logo {...child} />
  </Display>
  {
    rest?.columns?.map((column) => (
      <Display>
        <Title
          as="h4"
          {...column}
        />
        <Links links={column.links} />
      </Display>
    ))
  }
</Tag>

<style is:global>
  footer {
    display: grid;
    position: relative;
    justify-content: center;
    gap: var(--space-5);
    z-index: 20;
    border-top-width: var(--border-width);

    @media (min-width: 1024px) {
      grid-auto-columns: 1fr;
      grid-auto-flow: column;
    }
  }
</style>
