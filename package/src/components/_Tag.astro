---
import type { HTMLTag, Polymorphic } from 'astro/types'

type Props<As extends HTMLTag = 'div'> = Polymorphic<{ as: As }> & {
  slot?: any
  if?: 'slot' | any
  theme?: 'light' | 'dark'
  color?: 'base' | 'lowered' | 'raised' | 'primary' | 'secondary' | 'input'
  size?: 'sm' | 'md' | 'lg'
  density?: 'base' | 'compact'
  [key: string]: any
}

const {
  as: As = 'div',
  if: ifProp = true,
  theme,
  color = theme ? 'base' : undefined,
  density,
  size = density ? 'md' : undefined,
  ...rest
} = Astro.props

const slot = await Astro.slots.render('default')
const render = ifProp === 'slot' ? slot?.trim().length > 0 : ifProp
---

{
  render && (
    <As
      class:list={[
        'full-tag',
        {
          [`full-theme-${theme}`]: theme,
          [`full-color-${color}`]: color,
          [`full-density-${density}`]: density,
          [`full-size-${size}`]: size,
        },
      ]}
      {...rest}
    >
      <Fragment set:html={slot} />
    </As>
  )
}

<style>
  /* FIXME: reset is local now, so duplicate selectors */
  /* temp fix for starlight theme break because of reset */
  @import '../css/reset.css';
</style>

<style is:global>
  @import '../css/main.css';
</style>
