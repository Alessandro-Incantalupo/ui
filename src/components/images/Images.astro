---
import { ComponentProps } from 'astro/types'
import { buildProps, type BuildProps } from '../../utils'
import { Image } from '../image'

interface Base {
  images?: ComponentProps<typeof Image>['image'][]
}
type Props = BuildProps<Base, 'images'>
const props = buildProps(Astro, 'images')

const { images } = props

// const images = [
//   {
//     src: 'https://picsum.photos/seed/1/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/2/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/3/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/4/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/5/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/6/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/4/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/5/800/600',
//     alt: 'Image 1',
//   },
//   {
//     src: 'https://picsum.photos/seed/6/800/600',
//     alt: 'Image 1',
//   },
// ]
---

{
  images && (
    <div class="container">
      <div class="large">
        {images.map((image) => (
          <Image {image} />
        ))}
      </div>
      <div class="small">
        {images.map((image) => (
          <Image {image} />
        ))}
      </div>
    </div>
  )
}

<style>
  .large {
    flex-basis: 100%;
  }

  .large,
  .small {
    display: flex;
    gap: var(--spacing-1);
    padding-bottom: var(--spacing-1);
    width: 100%;
    overflow-x: scroll;
    scroll-behavior: smooth;
    scroll-snap-type: x mandatory;
  }

  .small {
    gap: var(--spacing-1);
    padding-top: var(--spacing-1);
    padding-bottom: var(--spacing-1);
  }

  img {
    border-radius: var(--radius);
    object-fit: contain;
  }

  .large > :global(img) {
    width: 100%;
    scroll-snap-align: start;
  }

  .small > :global(img) {
    transition: var(--transition);
    cursor: pointer;
    width: 20%;
    scroll-snap-align: start;

    &:hover {
      opacity: 0.75;
    }
  }

  .small {
    flex-grow: 1;
    flex-shrink: 1;
    flex-basis: 0px;
    order: 10;
  }

  input {
    display: none;
  }

  label:checked {
    border: 4px solid red;
  }
</style>
