---
import Pagefind from 'astro-pagefind/components/Search'
import Dialog from './Dialog.astro'

const { id = 'search', variant = 'secondary', icon, ...rest } = Astro.props
---

<Dialog
  {id}
  {variant}
  {icon}
  {...rest}
>
  <Pagefind uiOptions={{ showImages: false }} />
</Dialog>

<style is:global lang="scss">
  :root {
    --pagefind-ui-primary: var(--brand-9);
    --pagefind-ui-text: var(--text);
    --pagefind-ui-background: var(--background);
    --pagefind-ui-border: var(--border);
    --pagefind-ui-tag: var(--border);
  }

  .dialog div {
    width: 100%;
  }

  .pagefind-ui__search-input {
    outline: none !important;
    border: 1px solid var(--base-7);
    color: var(--base-11);

    &::placeholder {
      color: var(--base-11);
    }

    &:hover {
      outline: none;
    }

    &:focus {
      outline: none;
      box-shadow: inset 0 0 0 2px var(--base-8);
      border-color: var(--base-8);
    }
  }

  .pagefind-ui__search-clear {
    background: transparent !important;
  }
</style>
