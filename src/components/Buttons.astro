---
import type { ComponentProps } from 'astro/types'
import { buildProps, sortByIndex, type BuildProps } from '../utils'
import Button from './Button.astro'
import Tag from './Tag.astro'

interface Base {
  index?: number | null
  buttons?: ComponentProps<typeof Button>['button'][]
}

type Props = BuildProps<Base, 'buttons'>
const props = buildProps(Astro, 'buttons')

const { buttons, ...rest } = props

const look: {
  [key: number]: 'solid' | 'soft' | 'ghost'
} = {
  0: 'solid',
  1: 'soft',
  2: 'ghost',
}

const sorted = sortByIndex(buttons)
---

<Tag {...rest}>
  {
    sorted?.map((button, i) => (
      <Button
        look={look[i]}
        {button}
      />
    ))
  }
  <slot />
</Tag>

<style is:global>
  .buttons {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-2);
  }
</style>
