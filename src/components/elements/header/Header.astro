---
import { getEntry } from 'astro:content'
import type { Props as LogoProps } from '../Logo.astro'
import Logo from '../Logo.astro'
import type { Props as ButtonGroupProps } from '../button/ButtonGroup.astro'
import ButtonGroup from '../button/ButtonGroup.astro'
import type { Props as LinkGroupProps } from '../link/LinkList.astro'
import LinkList from '../link/LinkList.astro'
import type { Props as HeaderNavProps } from './HeaderNav.astro'
import HeaderNav from './HeaderNav.astro'
import type { Props as HeaderWrapperProps } from './HeaderWrapper.astro'
import HeaderWrapper from './HeaderWrapper.astro'

export interface Props
  extends HeaderWrapperProps,
    HeaderNavProps,
    LinkGroupProps,
    ButtonGroupProps {
  logo?: LogoProps | null
}

let { props } = Astro
props = {
  ...(await getEntry('globals', 'header')).data,
  ...props,
}
---

<HeaderWrapper {...props}>
  <Logo {...props.logo} />
  <HeaderNav>
    <LinkList
      layout="wide"
      {...props}
    />
    <ButtonGroup {...props} />
    <slot name="nav" />
  </HeaderNav>
  <slot />
</HeaderWrapper>

<!-- <div class="gap-flow4 flex">
  <ButtonGroup buttons={header.buttons} />
  <label
    class="button-secondary hue-base lg:hidden"
    for="header-toggle"
  >
    <i class="icon:menu-2 peer-checked:icon:x text-flow2 h-1.4em w-1.4em block" />
  </label>
</div>
<input
  id="header-toggle"
  class="peer hidden"
  type="checkbox"
/>

<div class:list="py-flow6 z-90 bg-hue1 border-hue6 !absolute left-0 right-0 top-full !hidden flex-col items-center border-y text-center backdrop-blur-lg peer-checked:max-lg:!flex">
  <Links
    layout="col"
    align="center"
    links={header.links}
  />
  <Buttons
    layout="col"
    buttons={header.buttons}
  />
</div> -->
