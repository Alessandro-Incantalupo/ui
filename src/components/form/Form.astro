---
import { buildProps, type BuildProps } from 'src'
import Fields from '../Fields.astro'
import Tag from '../Tag.astro'
// interface Props {
//   form?: string | null
//   title?: HTMLAttributes<'input'>['value'] | null
//   key?: HTMLAttributes<'input'>['value'] | null
//   inputs?: (InputProps | SelectProps | textareaProps)[] | null
//   button?: ButtonProps | null
// }

// const components: any = {
//   input: Input,
//   textarea: textarea,
//   select: Select,
// }

interface Base {}

type Props = BuildProps<Base, 'form', 'form'>
const props = buildProps(Astro, 'form')

const { method = 'POST', ...rest } = props

// let {
//   form,
//   title,
//   key,
//   inputs,
//   button = {
//     label: 'Verstuur',
//     href: '/bericht-ontvangen',
//   },
// } = Astro.props

// const formName = form?.split('/').pop()?.replace('.md', '') || 'myplaceholder'
// const formEntry = await getEntry('forms', formName)
// const formData = formEntry ? formEntry.data : Astro.props

// const inboxKey = import.meta.env?.PUBLIC_APP_URL?.replace('https://', '')
//   ?.replace('http://', '')
//   ?.split('.')
//   ?.shift()
---

<Tag
  {method}
  {...rest}
>
  <Fields {...props} />
</Tag>

<style is:global>
  .form {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-2);
    width: 100%;
    min-width: min(500px, 85vw);
    max-width: max(calc(var(--spacing-6) * 3), 500px);
    text-align: left;
  }
</style>
