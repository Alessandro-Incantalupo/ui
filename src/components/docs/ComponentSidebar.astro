---
import { getCollection } from 'astro:content'

const componentPages = await getCollection('pages', (entry: any) =>
  entry.slug.startsWith('components/')
)
---

<aside class="sidebar">
  <nav>
    <ul>
      {
        componentPages.map((page: any) => (
          <li>
            <a href={`/${page.slug}`}>{page.data.title}</a>
          </li>
        ))
      }
    </ul>
  </nav>
</aside>

<style lang="scss">
  .sidebar {
    display: none;
    position: sticky;
    top: 0;
    border-right: 1px solid var(--border);
    padding: var(--space-4);
    width: 250px;
    max-height: 100vh;
    overflow-y: auto;

    @media (min-width: 768px) {
      display: block;
    }

    ul {
      margin: 0;
      padding: 0;
      list-style-type: none;
    }

    li {
      margin-bottom: var(--space-2);
    }

    a {
      color: var(--text);
      text-decoration: none;

      &:hover {
        text-decoration: underline;
      }
    }
  }
</style>
