---
import CategoriesSection from '../blocks/categories/CategoriesSection.astro'
import ContactSection from '../blocks/contact/ContactSection.astro'
import ContentSection from '../blocks/content/ContentSection.astro'
import CtaSection from '../blocks/cta/CtaSection.astro'
import FeaturesSection from '../blocks/features/FeaturesSection.astro'
import HeroSection from '../blocks/hero/HeroSection.astro'
import HighlightsSection from '../blocks/highlights/HighlightsSection.astro'
import IntroSection from '../blocks/intro/IntroSection.astro'
import OffersSection from '../blocks/offers/OffersSection.astro'
import PersonsSection from '../blocks/persons/PersonsSection.astro'
import PostsSection from '../blocks/posts/PostsSection.astro'
import ProductsSection from '../blocks/products/ProductsSection.astro'
import ReviewsSection from '../blocks/reviews/ReviewsSection.astro'
import ServicesSection from '../blocks/services/ServicesSection.astro'
import SpotlightSection from '../blocks/spotlight/SpotlightSection.astro'

const SECTIONS: any = {
  CategoriesSection,
  ContactSection,
  ContentSection,
  CtaSection,
  FeaturesSection,
  HeroSection,
  HighlightsSection,
  IntroSection,
  OffersSection,
  PersonsSection,
  PostsSection,
  ProductsSection,
  ReviewsSection,
  ServicesSection,
  SpotlightSection,
}

interface Props {
  sections: any[]
  'bookshop:live'?: boolean
}

const { sections } = Astro.props
---

{
  sections?.map(async (section: any) => {
    const blockSlug: any = section._bookshop_name?.split('/').pop()
    const Section = SECTIONS[blockSlug]
    if (!Section) return null
    return <Section {...section} />
  })
}
