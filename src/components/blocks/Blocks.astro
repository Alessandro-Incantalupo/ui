---
import type { ComponentProps } from 'astro/types'
import * as BLOCKS from '../../blocks'
import { Block } from '../block'

interface Props {
  blocks?: ComponentProps<typeof Block>[]
}

const { blocks } = Astro.props
---

{
  blocks?.map(async (block: any) => {
    const filename: any = block._bookshop_name?.split('/').pop()
    const components: any = BLOCKS
    let FoundBlock = components[filename]
    if (!Block) FoundBlock = Block
    return <FoundBlock {...block} />
  })
}
