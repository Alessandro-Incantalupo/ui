---
import tablerIcons from '@iconify-json/tabler/icons.json'
import { buildProps, getSlot, type BuildProps } from '../../utils'
const tabler: any = tablerIcons

interface Base {
  hue?: 'accent' | 'base' | null
  icon?: keyof typeof tabler.icons
}

type Props = BuildProps<Base, 'icon', 'i'>
const props = buildProps(Astro, 'icon')
const slot = await getSlot(Astro)

const { icon, hue = 'accent', class: className, ...rest } = props
---

{
  (icon || slot) && (
    <i
      class:list={['icon', hue, className]}
      {...rest}
    >
      {icon && (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          set:html={tabler?.icons[icon]?.body}
        />
      )}
      <slot />
    </i>
  )
}

<style>
  i {
    display: inline-flex;
    position: relative;
    justify-content: center;
    align-items: center;
    width: 1em;
    height: 1em;
    color: var(--hue-9);

    /* FIXME */
    &.single-icon {
      width: 1.6em;
      height: 1.6em;
    }

    /* FIXME */
    &.button-icon {
      width: 1.315em;
      height: 1.315em;
    }

    svg {
      position: absolute;
      width: 120%;
      height: 120%;
    }
  }
</style>
