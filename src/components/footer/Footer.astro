---
import type { ComponentProps } from 'astro/types'
import { buildProps, type BuildProps, type GetReference } from '../../utils'
import { Display } from '../display'
import { Links } from '../links'
import { Logo } from '../logo'
import { Title } from '../title'
import FooterRoot from './FooterRoot.astro'

interface Base
  extends GetReference,
    ComponentProps<typeof Display>,
    Pick<ComponentProps<typeof Logo>, 'logo' | '_logo'> {
  columns?: {
    title: ComponentProps<typeof Title>['title']
    links: ComponentProps<typeof Links>['links']
  }[]
}

type Props = BuildProps<Base, 'footer'>
const props = buildProps(Astro, 'footer')

const { logo, _logo } = props
---

<FooterRoot {...props}>
  <Display {...props}>
    <Logo
      {logo}
      {_logo}
    />
  </Display>
  {
    props?.columns?.map((column) => (
      <Display>
        <Title
          as="h4"
          {...column}
        />
        <Links links={column.links} />
      </Display>
    ))
  }
</FooterRoot>
