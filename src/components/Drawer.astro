---
import type { HTMLAttributes } from 'astro/types'
import Button from './Button.astro'
import Root from './Root.astro'

type Props = HTMLAttributes<'div'> & {
  position?: 'left' | 'right'
  label?: string
  icon?: string
}

const { id = 'drawer', position = 'right', label, icon, ...rest } = Astro.props
---

<Button
  as="button"
  text={label}
  icon={icon}
  onclick={`document.getElementById('${id}').showModal()`}
/>

<Root
  as="dialog"
  class="drawer"
  {...rest}
>
  <slot />
</Root>

<style is:global lang="scss">
  .drawer {
    position: fixed;
    top: 0;
    bottom: 0;
    z-index: 99;

    &.position-left {
      left: 0;
    }

    &.position-right {
      right: 0;
    }

    &::backdrop {
      background: rgba(0, 0, 0, 0.5);
    }
  }
</style>
