---
import { HTMLTag, Polymorphic } from 'astro/types'
import Button from './Button.astro'
import Card from './Card.astro'

type Props<As extends HTMLTag = 'dialog'> = Polymorphic<{ as: As }> & {
  id?: string
  button?: {
    text: string
  }
}

const { id = 'dialog', button, ...rest } = Astro.props
---

<Button
  {...button}
  onclick={`document.getElementById('${id}').showModal()`}
/>

<dialog
  id={id}
  {...rest}
>
  <Card>
    <slot />
  </Card>

  <style>
    dialog::backdrop {
      background: rgba(0, 0, 0, 0.5);
    }
  </style>
</dialog>
