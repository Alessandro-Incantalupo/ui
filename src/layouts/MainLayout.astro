---
import type { CollectionEntry } from 'astro:content'
import { Button } from 'fulldev-ui'
import Block from 'fulldev-ui/components/Block.astro'
import Blocks from 'fulldev-ui/components/Blocks.astro'
import Layout from 'fulldev-ui/layouts/Layout.astro'

type Props = CollectionEntry<'pages'>

const { logo, header, headers, footer, footers, channels } =
  Astro.props.data || {}
---

<Layout {...Astro.props}>
  <Block
    _bookshop_name="Header"
    {logo}
    {...header}
  />
  <Blocks {...headers} />
  <main>
    <slot />
  </main>
  {
    channels?.whatsapp && (
      <Button
        variant="solid"
        color="brand"
        icon="brand-whatsapp"
        size="lg"
        href={`https://wa.me/${channels.whatsapp}`}
        style={{
          position: 'fixed',
          right: 'var(--space-4)',
          bottom: 'var(--space-4)',
          backgroundColor: '#46A758',
        }}
      />
    )
  }
  <Block
    _bookshop_name="Footer"
    {logo}
    {...footer}
  />
  <Blocks {...footers} />
</Layout>
