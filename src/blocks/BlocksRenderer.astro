---
import type { ComponentProps } from 'astro/types'
import * as BLOCKS from '.'
import { Block } from '../components/block'

interface Props {
  blocks?: ComponentProps<typeof Block>[]
}

const { blocks } = Astro.props
---

{
  blocks?.map(async (block: any) => {
    const filename: any = block._bookshop_name?.split('/').pop()
    const components: any = BLOCKS
    let Found = components[filename]
    if (!Block) Found = Block
    return <Found {...block} />
  })
}
