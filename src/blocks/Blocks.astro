---
import * as BLOCKS from 'src/blocks'

interface Props {
  blocks?: any[]
  'bookshop:live'?: boolean
}

const { blocks } = Astro.props
---

{
  blocks?.map(async (block: any) => {
    const filename: any = block._bookshop_name?.split('/').pop()
    const components: any = BLOCKS
    let Block = components[filename]
    if (!Block) throw new Error(`Block '${filename}' not found in Block.astro`)
    return <Block {...block} />
  })
}
