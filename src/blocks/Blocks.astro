---
import {
  CategoriesDeck,
  CategoriesSection,
  ContactSection,
  CtaSection,
  FeaturesSection,
  HeroSection,
  HighlightsSection,
  IntroSection,
  JobsSection,
  OffersSection,
  PersonsSection,
  PostsSection,
  ProductsSection,
  ReviewsSection,
  Section,
  ServicesSection,
  SpotlightSection,
} from 'src'

const BLOCKS: any = {
  CategoriesSection,
  CategoriesDeck,
  ContactSection,
  CtaSection,
  FeaturesSection,
  HeroSection,
  HighlightsSection,
  IntroSection,
  JobsSection,
  OffersSection,
  PersonsSection,
  PostsSection,
  ProductsSection,
  ReviewsSection,
  ServicesSection,
  SpotlightSection,
  Section,
}

interface Props {
  blocks?: any[]
  'bookshop:live'?: boolean
}

const { blocks } = Astro.props
---

{
  blocks?.map(async (block: any) => {
    const filename: any = block._bookshop_name?.split('/').pop()
    let Block = BLOCKS[filename]
    if (!Block) Block = BLOCKS.Section
    return <Block {...block} />
  })
}
